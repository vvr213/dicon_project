{% extends "base.html" %}
{% load static %}
{% static 'img/sets/placeholder.jpg' as placeholder_img %}
{% block title %}おすすめセット一覧{% endblock %}

{% block content %}
<div class="container py-3">
  <h1 class="h3 mb-3">管理栄養士監修 おすすめ献立セット</h1>

  <div class="row g-3">
    {% for set in sets %}
      <div class="col-12 col-md-4">
        <a class="text-decoration-none text-dark" href="{% url 'dicon_app:set_detail' pk=set.pk %}">
          <div class="card h-100">
                       
            <!-- 管理画面の画像を使う -->
            <div class="ratio ratio-16x9 rounded-top overflow-hidden">
              {% if set.image %}
                {# ▼ 管理画面で登録した画像があれば、それを表示 #}
                <img
                  src="{{ set.image.url }}"
                  alt="{{ set.name }}"
                  class="w-100 h-100 object-fit-cover"
                  loading="lazy"
                >
              {% else %}
                {# ▼ 画像がない場合は、プレースホルダー（ダミー画像）を表示 #}
                <img
                  src="{{ placeholder_img }}"
                  alt="NO IMAGE"
                  class="w-100 h-100 object-fit-cover bg-light text-muted"
                >
              {% endif %}
            </div>

            <div class="card-body">
              <div class="fw-bold">{{ set.name }}</div>
              {% if set.description %}
                <div class="text-muted small mt-1">{{ set.description }}</div>
              {% endif %}
            </div>
          </div>
        </a>
      </div>
    {% empty %}
      <p>セットがまだありません</p>
    {% endfor %}
  </div>
</div>
<div class="mt-5 text-center">
  <div class="mb-3">
    <a href="javascript:history.back()" class="btn btn-outline-secondary rounded-pill px-4">
      <i class="fa-solid fa-chevron-left me-2"></i>前の画面に戻る
    </a>
  </div>

  <a href="{% url 'dicon_app:home' %}" class="text-muted small text-decoration-none">
    <i class="fa-solid fa-house me-1"></i>トップページへ
  </a>
</div>
{% endblock %}
