{% extends "base.html" %}
{% block title %}{{ shop.name }}{% endblock %}

{% block content %}
<h1>{{ shop.name }}</h1>

<!-- 管理画面の説明（description）表示 -->
{% if shop.description %}
  <p>{{ shop.description }}</p>
{% endif %}

<p>{{ shop.street.name }} のお店</p>

<!-- 1/1追加 -->
<a class="btn btn-success"
   href="{% url 'dicon_app:shop_consult' shop.pk %}">
  LINEで相談する
</a>

<h2 class="h5 mt-4">商品</h2>

<div class="list-group">
  {% for product in products %}
    <div class="list-group-item d-flex justify-content-between align-items-center">
      <div>
        <div class="fw-bold">{{ product.name }}</div>
        <div class="text-muted small">{{ product.price }}円</div>
      </div>

      <div class="d-flex gap-2">
        <a class="btn btn-outline-secondary btn-sm"
           href="{% url 'dicon_app:product_detail' product.id %}">
          詳細
        </a>
        <a class="btn btn-sm btn-dark" href="{% url 'payments:checkout' product.id %}">購入</a>
      </div>
    </div>
  {% empty %}
    <div class="list-group-item">このお店にはまだ商品がありません</div>
  {% endfor %}
</div>

<p>
    <a href="{% url 'dicon_app:shop_list_by_street' street_slug=shop.street.slug %}">
      店舗一覧へ戻る
    </a>
</p>
{% endblock %}